   }
        .footer {
            padding: 20px;
            text-align: center;
            border-top: 1px solid var(--border-color);
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container" id="appContainer">
        <header>
            <button class="view-toggle" onclick="toggleView()" title="Alternar visualização">
                <i class="fas fa-mobile-alt"></i>
            </button>
            
            <h1>InsulinaCalc</h1>
            <p class="header-description">Calculadora para doses de insulina baseada em métodos científicos</p>
            
            <button class="about-btn" onclick="openModal()" title="Sobre a calculadora">
                <i class="fas fa-info-circle"></i>
            </button>
        </header>
    
        <!-- Modal Sobre -->
        <div id="aboutModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <h2 class="modal-title">Sobre o InsulinaCalc</h2>
                
                <div class="credits-section">
                    <div class="credits-item">
                        <strong>Desenvolvido por:</strong> Eduardo Candeia Gonçalves
                    </div>
                </div>
                
                <div class="credits-section no-border">
                    <div class="credits-item">
                        <strong>Metodologia de cálculo: </strong> Baseada em protocolos clínicos estabelecidos
                    </div>
                    <div class="credits-item">
                        Esta calculadora implementa métodos específicos de cálculo de doses de insulina conforme orientação de especialistas em endocrinologia.
                    </div>
                </div>
                
                <div class="credits-section no-border">
                    <div class="credits-item">
                        <strong>Versão:</strong> 1.0.0
                    </div>
                    <div class="credits-item">
                        Esta aplicação é uma ferramenta educativa e não substitui a orientação médica profissional.
                    </div>
                </div>
            </div>
        </div>
        
        <ul class="tabs-nav">
            <li><a href="#calculo-peso" class="tab-link active" data-tab="calculo-peso"><i class="fas fa-weight"></i> Cálculo por Peso</a></li>
            <li><a href="#glargina-lispro" class="tab-link" data-tab="glargina-lispro"><i class="fas fa-syringe"></i> Glargina/Lispro</a></li>
            <li><a href="#prescricao" class="tab-link" data-tab="prescricao"><i class="fas fa-file-medical"></i> Prescrição</a></li>
            <li><a href="#guia-info" class="tab-link" data-tab="guia-info"><i class="fas fa-book-medical"></i> Guia de Insulinas</a></li>
        </ul>
        
        <!-- Aba 1: Cálculo por Peso -->
        <div id="calculo-peso" class="tab-content active">
            <h2>Cálculo baseado no Peso</h2>
            
            <div class="form-group">
                <label for="inputPeso">Peso (kg):</label>
                <input type="number" id="inputPeso" placeholder="Digite o peso em kg" min="0.1" max="300" step="0.1">
            </div>
            
            <div class="form-group">
                <label for="selectFator">Fator (U/kg):</label>
                <select id="selectFator">
                    <option value="0.3">0,3 - Muito sensível</option>
            <div class="form-group hidden" id="fatorPersonalizadoGroup">
                    <option value="0.7" selected>0,7 - Padrão</option>
                    <option value="1.0">1,0 - Resistente</option>
                    <option value="1.5">1,5 - Muito resistente</option>
                    <option value="2.0">2,0 - Extremamente resistente</option>
            <div class="form-group hidden" id="fatorPersonalizadoGroup">
                </select>
            </div>
            
            <div class="form-group hidden" id="fatorPersonalizadoGroup">
                <label for="inputFatorPersonalizado">Fator personalizado:</label>
                <input type="number" id="inputFatorPersonalizado" placeholder="Digite o fator personalizado" min="0.1" max="10" step="0.1">
            </div>
            
            <div class="admin-route-selector">
                <label>Via de Administração:</label>
                <div class="route-options">
                    <div class="route-option active" id="route-sc" onclick="selectRoute('sc')">
                        <i class="fas fa-syringe"></i>
                        <span>Subcutânea</span>
                    </div>
                    <div class="route-option" id="route-iv" onclick="selectRoute('iv')">
                        <i class="fas fa-pump-medical"></i>
                        <span>Intravenosa</span>
                    </div>
                    <div class="route-option" id="route-im" onclick="selectRoute('im')">
                        <i class="fas fa-prescription-bottle"></i>
                        <span>Intramuscular</span>
                    </div>
                </div>
                <div class="route-description" id="route-description">
                    Via subcutânea: Administração no tecido subcutâneo, geralmente abdômen, coxas ou braços. Via padrão para insulinoterapia.
                </div>
            </div>
            
            <button onclick="calcularPeso()"><i class="fas fa-calculator"></i> Calcular Doses</button>
            
            <div id="resultadosPeso" class="results">
                <h3>Resultados</h3>
                
                <div class="result-item">
                    <span class="result-label">Dose Total Diária:</span> 
                    <span class="result-value"><span id="doseTotalPeso">--</span> U</span>
                </div>
                
                <h4 class="section-title">Distribuição Dia/Noite:</h4>
                <div class="result-item">
                    <span class="result-label">Dose Diurna (70%):</span> 
                    <span class="result-value"><span id="doseManha">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">NPH Manhã (70%):</span> 
                    <span class="result-value"><span id="intermediariaManha">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">Regular Manhã (30%):</span> 
                    <span class="result-value"><span id="rapidaManha">--</span> U</span>
                </div>
                
                <div class="result-item">
                    <span class="result-label">Dose Noturna (30%):</span> 
                    <span class="result-value"><span id="doseNoite">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">NPH Noite (50%):</span> 
                    <span class="result-value"><span id="intermediariaNoite">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">Regular Noite (50%):</span> 
                    <span class="result-value"><span id="rapidaNoite">--</span> U</span>
                </div>
                
                <h4 class="section-title">Esquema Basal-Bolus:</h4>
                <div class="result-item">
                    <span class="result-label">Insulina Basal (50%):</span> 
                    <span class="result-value"><span id="doseBasal">--</span> U</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Insulina Bolus Total (50%):</span> 
                    <span class="result-value"><span id="bolusTotal">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">Bolus Café (40%):</span> 
                    <span class="result-value"><span id="bolusCafe">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">Bolus Almoço (30%):</span> 
                    <span class="result-value"><span id="bolusAlmoco">--</span> U</span>
                </div>
                <div class="result-item indent">
                    <span class="result-label">Bolus Jantar (30%):</span> 
                    <span class="result-value"><span id="bolusJantar">--</span> U</span>
                </div>
            </div>
            
            <!-- Horários de Aplicação -->
            <div class="timing-info">
                <h4><i class="fas fa-clock"></i> Horários Recomendados de Aplicação:</h4>
                <ul class="timing-list">
                    <li><i class="fas fa-circle"></i> <strong>Esquema 70/30 (2 doses):</strong></li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Dose matinal: 30 minutos antes do café da manhã (entre 06:00-08:00h)</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Dose noturna: 30 minutos antes do jantar (entre 18:00-20:00h)</li>
                    <li><i class="fas fa-circle"></i> <strong>Esquema Basal-Bolus:</strong></li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Insulina basal (Glargina/Detemir): Uma vez ao dia, mesmo horário (preferencialmente antes de dormir)</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Insulina basal (NPH): Duas vezes ao dia (antes do café da manhã e ao deitar)</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Bolus de insulina rápida: 15-30 minutos antes das refeições</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Bolus de insulina ultrarrápida: 0-15 minutos antes das refeições</li>
                </ul>
                <p class="citation">Fonte: Sociedade Brasileira de Diabetes. Diretrizes da Sociedade Brasileira de Diabetes 2021-2022.</p>
            </div>
            
            <div class="info-box">
                <h4>Informações sobre o cálculo:</h4>
                <p><strong>Dose Total Diária:</strong> Calculada como 0,3 a 2,0 unidades por kg de peso corporal, dependendo da sensibilidade do paciente.</p>
                <p><strong>Esquema 70/30:</strong> Divisão em 70% insulina intermediária (NPH) e 30% insulina rápida (Regular).</p>
                <p><strong>Divisão de cada tipo:</strong> No esquema 70/30, os 70% iniciais são divididos novamente em 70% NPH e 30% Regular. Já os 30% iniciais são divididos em 50% NPH e 50% Regular.</p>
                <p><strong>Distribuição diária:</strong> Tipicamente 2/3 da dose total pela manhã e 1/3 à noite.</p>
                <p><strong>Esquema Basal-Bolus:</strong> Alternativa com 50% da dose como insulina basal e 50% como bolus distribuídos nas refeições.</p>
            </div>
        </div>
        
        <!-- Aba 2: Glargina/Lispro -->
        <div id="glargina-lispro" class="tab-content">
            <h2>Cálculo Glargina/Lispro</h2>
            
            <div class="form-group">
                <label for="inputPesoGL">Peso (kg):</label>
                <input type="number" id="inputPesoGL" placeholder="Digite o peso em kg" min="0.1" max="300" step="0.1">
            </div>
            
            <div class="form-group">
                <label for="selectFatorGL">Fator (U/kg):</label>
                <select id="selectFatorGL">
                    <option value="0.3">0,3 - Muito sensível</option>
                    <option value="0.5">0,5 - Sensível</option>
                    <option value="0.7" selected>0,7 - Padrão</option>
                    <option value="1.0">1,0 - Resistente</option>
                    <option value="1.5">1,5 - Muito resistente</option>
                    <option value="2.0">2,0 - Extremamente resistente</option>
            <div class="form-group hidden" id="fatorPersonalizadoGLGroup">
                </select>
            </div>
            
            <div class="form-group hidden" id="fatorPersonalizadoGLGroup">
                <label for="inputFatorPersonalizadoGL">Fator personalizado:</label>
                <input type="number" id="inputFatorPersonalizadoGL" placeholder="Digite o fator personalizado" min="0.1" max="10" step="0.1">
            </div>
            
            <div class="admin-route-selector">
                <label>Via de Administração:</label>
                <div class="route-options">
                    <div class="route-option active" id="route-sc-gl" onclick="selectRouteGL('sc')">
                        <i class="fas fa-syringe"></i>
                        <span>Subcutânea</span>
                    </div>
                </div>
                <div class="route-description" id="route-description-gl">
                    Via subcutânea: Administração no tecido subcutâneo, geralmente abdômen, coxas ou braços. Única via para Glargina e Lispro.
                </div>
            </div>
            
            <button onclick="calcularGlarginaLispro()"><i class="fas fa-calculator"></i> Calcular Doses</button>
            
            <div id="resultadosGL" class="results">
                <h3>Resultados do Esquema Glargina/Lispro</h3>
                
                <div class="result-item">
                    <span class="result-label">Dose Total Diária:</span> 
                    <span class="result-value"><span id="doseTotalGL">--</span> U</span>
                </div>
                
                <h4 class="section-title">Distribuição por Tipo de Insulina:</h4>
                <div class="result-item">
                    <span class="result-label">Glargina (60%):</span> 
                    <span class="result-value"><span id="doseGlargina">--</span> U</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Lispro Total (40%):</span> 
                    <span class="result-value"><span id="doseLisproTotal">--</span> U</span>
                </div>
                
                <h4 class="section-title">Distribuição da Lispro nas Refeições:</h4>
                <div class="result-item">
                    <span class="result-label">Lispro Café da Manhã (1/3):</span> 
                    <span class="result-value"><span id="lisproManha">--</span> U</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Lispro Almoço (1/3):</span> 
                    <span class="result-value"><span id="lisproAlmoco">--</span> U</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Lispro Jantar (1/3):</span> 
                    <span class="result-value"><span id="lisproJantar">--</span> U</span>
                </div>
            </div>
            
            <!-- Diagrama de distribuição das doses -->
                            <div class="bar-section nph-color glargina-width">Glargina 60%</div>
                            <div class="bar-section regular-color lispro-width">Lispro 40%</div>
                    <h4 class="distribution-title">Esquema de Distribuição Glargina/Lispro</h4>
                    
                            <div class="bar-section nph-color glargina-width">Glargina 60%</div>
                            <div class="bar-section regular-color lispro-width">Lispro 40%</div>
                        <div class="diagram-label">Dose Total:</div>
                        <div class="diagram-bar">
                            <div class="bar-section nph-color glargina-bar">Glargina 60%</div>
                            <div class="bar-section regular-color lispro-bar">Lispro 40%</div>
                        </div>
                    </div>
                    
                    <!-- Distribuição Lispro -->
                    <div class="diagram-row">
                        <div class="diagram-label">Distribuição Lispro:</div>
                        <div class="diagram-bar">
                            <div class="bar-section regular-color cafe-bar">Café 1/3</div>
                            <div class="bar-section regular-color almoco-bar">Almoço 1/3</div>
                            <div class="bar-section regular-color jantar-bar">Jantar 1/3</div>
                        </div>
                    </div>
                    
                    <!-- Legenda -->
                    <div class="diagram-legend">
                        <div class="legend-item">
                            <div class="legend-color nph-color"></div>
                            <span>Glargina (Basal)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color regular-color"></div>
                            <span>Lispro (Bolus)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Horários de Aplicação -->
            <div class="timing-info">
                <h4><i class="fas fa-clock"></i> Horários Recomendados de Aplicação:</h4>
                <ul class="timing-list">
                    <li><i class="fas fa-circle"></i> <strong>Insulina Glargina (basal):</strong></li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Uma vez ao dia, no mesmo horário (preferencialmente antes de dormir, entre 21:00-22:00h)</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> A regularidade no horário de aplicação é essencial para manter níveis constantes</li>
                    
                    <li><i class="fas fa-circle"></i> <strong>Insulina Lispro (bolus):</strong></li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Café da manhã: 0-15 minutos antes de iniciar a refeição (entre 06:00-08:00h)</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Almoço: 0-15 minutos antes de iniciar a refeição (entre 12:00-13:00h)</li>
                    <li class="indent"><i class="fas fa-angle-right"></i> Jantar: 0-15 minutos antes de iniciar a refeição (entre 18:00-20:00h)</li>
                </ul>
                <p class="citation">Fonte: Sociedade Brasileira de Diabetes. Diretrizes da Sociedade Brasileira de Diabetes 2021-2022.</p>
            </div>
            
            <div class="info-box">
                <h4>Informações sobre o esquema Glargina/Lispro:</h4>
                <p><strong>Características do Esquema:</strong> Este esquema utiliza insulina glargina como basal (60% da dose total) e insulina lispro como bolus prandial (40% da dose total).</p>
                <p><strong>Vantagens:</strong></p>
                <ul>
                    <li>Perfil mais fisiológico, mimetizando a secreção natural de insulina</li>
                    <li>Menor risco de hipoglicemias, especialmente noturnas</li>
                    <li>Cobertura mais previsível e estável ao longo do dia</li>
                    <li>Flexibilidade de horários de refeições</li>
                </ul>
                <p><strong>Glargina:</strong> Insulina de ação prolongada, sem pico definido, com duração de até 24 horas. Mantém níveis basais constantes.</p>
                <p><strong>Lispro:</strong> Insulina de ação ultrarrápida, início em 10-15 minutos, pico em 1-2 horas, duração 3-5 horas. Ideal para cobertura de refeições.</p>
            </div>
        </div>
        
        <!-- Aba 3: Prescrição -->
        <div id="prescricao" class="tab-content">
            <h2>Prescrição Médica</h2>
            
            <div class="form-group">
                <label for="selectTipoPrescrição">Selecione o tipo de esquema:</label>
                <select id="selectTipoPrescrição">
                    <option value="esquema1">Esquema Convencional (NPH/Regular)</option>
                    <option value="esquema2">Esquema Glargina/Lispro</option>
                </select>
            </div>
            
            <div id="dadosPrescrição" class="form-group">
                <p>Clique em um dos esquemas calculados anteriormente para gerar automaticamente a prescrição ou insira os valores manualmente abaixo:</p>
            </div>
            
            <div id="prescricao-esquema1" class="prescricao-esquema">
                <h4>Esquema Convencional (NPH/Regular)</h4>
                
                <div class="form-group">
                    <label for="nphManha">NPH Manhã (UI):</label>
                    <input type="number" id="nphManha" min="0" step="1" placeholder="UI">
                </div>
                
                <div class="form-group">
                    <label for="regularManha">Regular Manhã (UI):</label>
                    <input type="number" id="regularManha" min="0" step="1" placeholder="UI">
                </div>
                
                <div class="form-group">
                    <label for="nphNoite">NPH Noite (UI):</label>
                    <input type="number" id="nphNoite" min="0" step="1" placeholder="UI">
                </div>
                
                <div class="form-group">
                    <label for="regularNoite">Regular Noite (UI):</label>
                    <input type="number" id="regularNoite" min="0" step="1" placeholder="UI">
                </div>
            </div>
            
            <div id="prescricao-esquema2" class="prescricao-esquema">
                <h4>Esquema Glargina/Lispro</h4>
                
                <div class="form-group">
                    <label for="glargina">Glargina (UI):</label>
                    <input type="number" id="glargina" min="0" step="1" placeholder="UI">
                </div>
                
                <div class="form-group">
                    <label for="lisproManhaPrescricao">Lispro Café da Manhã (UI):</label>
                    <input type="number" id="lisproManhaPrescricao" min="0" step="1" placeholder="UI">
                </div>
                
                <div class="form-group">
                    <label for="lisproAlmocoPrescricao">Lispro Almoço (UI):</label>
                    <input type="number" id="lisproAlmocoPrescricao" min="0" step="1" placeholder="UI">
                </div>
                
                <div class="form-group">
                    <label for="lisproJantarPrescricao">Lispro Jantar (UI):</label>
                    <input type="number" id="lisproJantarPrescricao" min="0" step="1" placeholder="UI">
                </div>
            </div>
            
            <button onclick="gerarPrescricao()"><i class="fas fa-file-prescription"></i> Gerar Prescrição</button>
            
            <div id="resultadoPrescricao" class="results">
                <h3>Prescrição Médica</h3>
                
                <div id="prescricaoTexto" class="prescricao-texto">
                    <!-- Modelo da prescrição será inserido aqui pelo JavaScript -->
                </div>
                
                <button onclick="copiarPrescricao()" class="btn-copiar"><i class="fas fa-copy"></i> Copiar Prescrição</button>
                <button onclick="imprimirPrescricao()" class="btn-imprimir"><i class="fas fa-print"></i> Imprimir</button>
            </div>            
            <div class="info-box">
                <h4>Orientações para prescrição:</h4>
                <p><strong>Forma farmacêutica:</strong> Solução injetável</p>
                <p><strong>Apresentações:</strong></p>
                <ul>
                    <li>Insulina NPH: Frasco-ampola com 10 mL (100 UI/mL)</li>
                    <li>Insulina Regular: Frasco-ampola com 10 mL (100 UI/mL)</li>
                    <li>Insulina Glargina: Frasco-ampola com 10 mL ou caneta descartável com 3 mL (100 UI/mL)</li>
                    <li>Insulina Lispro: Frasco-ampola com 10 mL ou caneta descartável com 3 mL (100 UI/mL)</li>
                </ul>
                <p><strong>Observações importantes:</strong></p>
                <ul>
                    <li>As unidades de insulina são sempre arredondadas para evitar erros de dosagem</li>
                    <li>Prescreva as seringas compatíveis com as doses calculadas (0,3 mL, 0,5 mL ou 1,0 mL)</li>
                    <li>Para pacientes com necessidade de doses precisas, considere o uso de canetas de insulina</li>
                    <li>Recomende o rodízio dos locais de aplicação para evitar lipodistrofia</li>
                </ul>
            </div>
        </div>
        
        <!-- Aba 4: Guia de Insulinas -->
        <div id="guia-info" class="tab-content">
            <h2>Guia de Insulinas</h2>
            
            <button class="collapsible">Tipos de Insulina e Farmacocinética</button>
            <div class="collapse-content">
                <div class="collapse-content-inner">
                    <div class="table-responsive">
                        <table>
                            <tr>
                                <th>Tipo</th>
                                <th>Início de ação</th>
                                <th>Pico</th>
                                <th>Duração</th>
                                <th>Via de Administração</th>
                            </tr>
                            <tr>
                                <td>Ultra-rápida (Lispro, Aspart, Glulisina)</td>
                                <td>10-15 min</td>
                                <td>1-2h</td>
                                <td>3-5h</td>
                                <td>SC, IV (em ambiente hospitalar)</td>
                            </tr>
                            <tr>
                                <td>Rápida (Regular)</td>
                                <td>30 min</td>
                                <td>2-3h</td>
                                <td>5-8h</td>
                                <td>SC, IV, IM</td>
                            </tr>
                            <tr>
                                <td>Intermediária (NPH)</td>
                                <td>2-4h</td>
                                <td>4-10h</td>
                                <td>10-16h</td>
                                <td>SC</td>
                            </tr>
                            <tr>
                                <td>Longa (Glargina)</td>
                                <td>2-4h</td>
                                <td>Sem pico</td>
                                <td>20-24h</td>
                                <td>SC</td>
                            </tr>
                            <tr>
                                <td>Ultra-longa (Degludeca)</td>
                                <td>1-2h</td>
                                <td>Sem pico</td>
                                <td>>42h</td>
                                <td>SC</td>
                            </tr>
                        </table>
                    </div>
                    <p><strong>Observação:</strong> A insulina NPH apresenta grande variabilidade entre pacientes e mesmo no mesmo paciente em dias diferentes.</p>
                    <p><strong>Vias de Administração:</strong></p>
                    <ul>
                        <li><strong>SC (Subcutânea):</strong> Via mais comum para uso ambulatorial. Absorção mais lenta e prolongada.</li>
                        <li><strong>IV (Intravenosa):</strong> Início de ação imediato. Usada em emergências e ambiente hospitalar.</li>
                        <li><strong>IM (Intramuscular):</strong> Absorção mais rápida que SC, mas menos previsível. Pode ser útil em emergências.</li>
                    </ul>
                    <p class="citation">Fonte: Sociedade Brasileira de Diabetes. (2022). Diretrizes da Sociedade Brasileira de Diabetes 2021-2022.</p>
                </div>
            </div>
            
            <button class="collapsible">Esquemas de Tratamento</button>
            <div class="collapse-content">
                <div class="collapse-content-inner">
                    <h4>1. Esquema Convencional (NPH/Regular)</h4>
                    <p>Mais simples, menos flexível, geralmente 2 injeções por dia (manhã e noite).</p>
                    <ul>
                        <li><strong>2/3 da dose pela manhã:</strong> 
                            <ul>
                                <li>70% NPH + 30% Regular antes do café</li>
                                <li><strong>Horário:</strong> 30 minutos antes do café da manhã (06:00-08:00h)</li>
                            </ul>
                        </li>
                        <li><strong>1/3 da dose à noite:</strong> 
                            <ul>
                                <li>50% NPH + 50% Regular antes do jantar</li>
                                <li><strong>Horário:</strong> 30 minutos antes do jantar (18:00-20:00h)</li>
                            </ul>
                        </li>
                    </ul>
                    <p><strong>Indicações:</strong> Pacientes com rotina regular, idosos, dificuldade de adesão a esquemas complexos.</p>
                    
                    <h4>2. Esquema Glargina/Lispro</h4>
                    <p>Esquema com insulina basal de longa duração e bolus de ação ultrarrápida, proporcionando maior flexibilidade.</p>
                    <ul>
                        <li><strong>Basal (60% da dose total):</strong> 
                            <ul>
                                <li>Insulina Glargina 1x/dia</li>
                                <li><strong>Horário:</strong> Mesmo horário todos os dias, preferencialmente antes de dormir</li>
                            </ul>
                        </li>
                        <li><strong>Bolus (40% da dose total):</strong> Insulina Lispro antes das refeições
                            <ul>
                                <li>1/3 no café da manhã</li>
                                <li>1/3 no almoço</li>
                                <li>1/3 no jantar</li>
                                <li><strong>Horário:</strong> 0-15 minutos antes das refeições</li>
                            </ul>
                        </li>
                    </ul>
                    <p><strong>Indicações:</strong> DM1, gestantes, rotina variável, melhor controle glicêmico, pacientes com hipoglicemias noturnas frequentes.</p>
                    
                    <h4>3. Esquema Basal-Bolus Clássico</h4>
                    <p>Divisão da dose total em 50% basal e 50% bolus, com flexibilidade na distribuição das doses de bolus.</p>
                    <ul>
                        <li><strong>Basal (50% da dose total):</strong> 
                            <ul>
                                <li>Insulina basal (Glargina, Detemir, Degludeca) 1x/dia ou NPH 2x/dia</li>
                            </ul>
                        </li>
                        <li><strong>Bolus (50% da dose total):</strong> 
                            <ul>
                                <li>Distribuição típica: 40% café, 30% almoço, 30% jantar</li>
                            </ul>
                        </li>
                    </ul>
                    <p><strong>Indicações:</strong> DM1, DM2 com falência avançada das células beta, pacientes com necessidades de ajustes frequentes.</p>
                    
                    <p class="citation">Fonte: Sociedade Brasileira de Diabetes. (2022). Diretrizes da Sociedade Brasileira de Diabetes 2021-2022.</p>
                </div>
            </div>
            
            <button class="collapsible">Ajustes de Dose e Monitoramento</button>
            <div class="collapse-content">
                <div class="collapse-content-inner">
                    <h4>Monitoramento ideal para ajuste:</h4>
                    <ul>
                        <li>Glicemia de jejum (ajusta basal noturna)</li>
                        <li>Glicemia pré-almoço (ajusta bolus matinal)</li>
                        <li>Glicemia pré-jantar (ajusta bolus do almoço)</li>
                        <li>Glicemia 2h pós-refeições (avalia eficácia do bolus)</li>
                        <li>Glicemia ao deitar (ajusta bolus do jantar)</li>
                    </ul>
                    
                    <h4>Regras para ajuste de dose:</h4>
                    <ul>
                        <li><strong>Ajustes lentos e pequenos:</strong> 10-20% da dose a cada 2-3 dias</li>
                        <li><strong>Hipoglicemias:</strong> Reduzir dose da insulina correspondente ao período em 20%</li>
                        <li><strong>Hiperglicemia persistente:</strong> Aumentar insulina correspondente ao período em 10-20%</li>
                        <li><strong>Fenômeno do alvorecer:</strong> Hiperglicemia matinal por aumento de hormônios contrarreguladores; pode requerer ajuste na insulina basal</li>
                    </ul>
                    
                    <h4>Alvo glicêmico:</h4>
                    <ul>
                        <li><strong>Jovens saudáveis:</strong> 80-130 mg/dL (jejum) e &lt;180 mg/dL (pós-prandial)</li>
                        <li><strong>Idosos ou com comorbidades:</strong> 100-180 mg/dL (jejum) e &lt;200 mg/dL (pós-prandial)</li>
                        <li><strong>Gestantes:</strong> &lt;95 mg/dL (jejum) e &lt;120 mg/dL (pós-prandial)</li>
                    </ul>
                    
                    <h4>Horários recomendados para monitoramento:</h4>
                    <ul>
                        <li><strong>Glicemia de jejum:</strong> Ao acordar, antes do café da manhã (06:00-08:00h)</li>
                        <li><strong>Glicemia pré-prandial:</strong> Antes das principais refeições</li>
                        <li><strong>Glicemia pós-prandial:</strong> 2 horas após o início das refeições</li>
                        <li><strong>Glicemia ao deitar:</strong> Antes de dormir (22:00-23:00h)</li>
                        <li><strong>Glicemia da madrugada:</strong> Entre 02:00-04:00h (quando suspeita de hipoglicemia noturna)</li>
                    </ul>
                    
                    <p class="citation">Fonte: American Diabetes Association. (2022). Standards of Medical Care in Diabetes. Diabetes Care, 45(Supplement 1).</p>
                </div>
            </div>
            
            <button class="collapsible">Complicações e Manejo</button>
            <div class="collapse-content">
                <div class="collapse-content-inner">
                    <h4>Hipoglicemia:</h4>
                    <p><strong>Definição:</strong> Glicemia &lt;70 mg/dL</p>
                    <ul>
                        <li><strong>Tratamento:</strong> 
                            <ul>
                                <li>Paciente consciente: 15g de carboidrato rápido (3 colheres de açúcar, 150ml de suco)</li>
                                <li>Paciente inconsciente: Glucagon IM/SC ou Glicose 50% EV</li>
                            </ul>
                        </li>
                        <li><strong>Prevenção:</strong> 
                            <ul>
                                <li>Monitoramento frequente</li>
                                <li>Ajuste de dose (reduzir em 20% se hipoglicemias frequentes)</li>
                                <li>Considerar lanches intermediários</li>
                            </ul>
                        </li>
                    </ul>
                    
                    <h4>Lipodistrofia:</h4>
                    <ul>
                        <li>Alteração do tecido subcutâneo por injeções repetidas no mesmo local</li>
                        <li><strong>Impacto:</strong> Absorção errática de insulina</li>
                        <li><strong>Prevenção:</strong> Rodízio dos locais de aplicação</li>
                    </ul>
                    
                    <h4>Efeito Somogyi:</h4>
                    <p>Hiperglicemia matinal paradoxal após hipoglicemia noturna (rebote hiperglicêmico).</p>
                    <p><strong>Manejo:</strong> Reduzir dose de insulina noturna.</p>
                    
                    <h4>Locais de aplicação e suas características:</h4>
                    <ul>
                        <li><strong>Abdômen:</strong> Absorção mais rápida e consistente. Preferencial para doses antes das refeições.</li>
                        <li><strong>Coxas:</strong> Absorção mais lenta. Pode ser útil para insulina basal noturna.</li>
                        <li><strong>Braços (região posterior):</strong> Absorção intermediária. Bom para insulina de ação intermediária.</li>
                        <li><strong>Nádegas:</strong> Absorção mais lenta. Útil para insulina basal.</li>
                    </ul>
                    
                    <p><strong>Esquema de Rodízio:</strong> Manter o mesmo local para o mesmo horário do dia, mudando apenas alguns centímetros a cada aplicação. Alternar para outro local após 1-2 semanas.</p>
                    
                    <p class="citation">Fonte: Sociedade Brasileira de Diabetes. (2022). Diretrizes da Sociedade Brasileira de Diabetes 2021-2022.</p>
                </div>
            </div>
            
            <button class="collapsible">Situações Especiais</button>
            <div class="collapse-content">
                <div class="collapse-content-inner">
                    <h4>Paciente hospitalizado:</h4>
                    <ul>
                        <li><strong>Não crítico:</strong> Esquema basal-bolus-correção. Evitar sliding scale isolado</li>
                        <li><strong>Crítico:</strong> Infusão EV contínua, alvo 140-180 mg/dL</li>
                        <li><strong>Jejum para procedimentos:</strong> 50-80% da basal, suspender bolus</li>
                    </ul>
                    
                    <h4>Paciente com Doença Renal Crônica:</h4>
                    <ul>
                        <li>Maior risco de hipoglicemia por redução da degradação renal de insulina</li>
                        <li>Reduzir doses em 25-50% conforme TFG</li>
                        <li>Preferir insulinas com metabolização hepática (Detemir)</li>
                    </ul>
                    
                    <h4>Paciente corticodependente:</h4>
                    <ul>
                        <li>Aumento importante da resistência à insulina</li>
                        <li>Pode requerer 30-40% a mais de insulina</li>
                        <li>Maior necessidade de bolus à tarde se corticoide matinal</li>
                    </ul>
                    
                    <h4>Gravidez:</h4>
                    <ul>
                        <li>Controle rigoroso: jejum &lt;95 mg/dL, 1h pós-prandial &lt;140 mg/dL, 2h &lt;120 mg/dL</li>
                        <li>Esquema basal-bolus preferencial</li>
                        <li>Necessidade crescente de insulina ao longo da gestação</li>
                    </ul>
                    
                    <p class="citation">Fonte: American Diabetes Association. (2022). Standards of Medical Care in Diabetes. Diabetes Care, 45(Supplement 1).</p>
                </div>
            </div>
            
            <div class="info-box">
                <h4>Sugestões para insulinoterapia eficiente:</h4>
                <ul>
                    <li>Considere o momento alimentar em relação ao pico da insulina: Regular deve ser aplicada 30 min antes das refeições, enquanto Lispro 0-15 min;</li>
                    <li>Uma regra prática: para cada 30 mg/dL acima do alvo, adicione 2U de insulina de correção;</li>
                    <li>Ao iniciar corticoterapia, aumente a dose de insulina em 20% e monitore para ajustes adicionais;</li>
                    <li>Exercícios podem aumentar a sensibilidade à insulina por até 48h - oriente redução de dose para atividades não rotineiras;</li>
                    <li>Na ausência de automonitoramento frequente, prefira esquemas menos intensivos e mais previsíveis.</li>
                </ul>
            </div>
        </div>
        
        <!-- Modal de Referências -->
        <div id="referencesModal" class="modal">
            <div class="modal-content references-modal">
                <span class="close-modal" onclick="closeReferencesModal()">&times;</span>
                <h2 class="modal-title">Referências Bibliográficas</h2>
                
                <div class="references-section">
                    <h3>Diretrizes e Consensos</h3>
                    <ol class="references-list">
                        <li>Sociedade Brasileira de Diabetes. (2022). <strong>Diretrizes da Sociedade Brasileira de Diabetes 2021-2022</strong>.</li>
                        <li>American Diabetes Association. (2022). <strong>Standards of Medical Care in Diabetes</strong>. <em>Diabetes Care</em>, 45(Supplement 1).</li>
                        <li>American Diabetes Association Professional Practice Committee. (2022). <strong>16. Diabetes Care in the Hospital: Standards of Medical Care in Diabetes-2022</strong>. <em>Diabetes Care</em>, 45(Supplement_1), S244-S253.</li>
                    </ol>
                </div>
                
                <div class="references-section">
                    <h3>Livros e Manuais</h3>
                    <ol class="references-list" start="4">
                        <li>Vilar, L. (Ed.). (2021). <strong>Endocrinologia Clínica</strong>. 7ª Ed. Guanabara Koogan.</li>
                        <li>Oliveira, J. E. P., Montenegro Junior, R. M., & Vencio, S. (2017). <strong>Diretrizes da Sociedade Brasileira de Diabetes 2017-2018</strong>. Editora Clannad.</li>
                    </ol>
                </div>
                
                <div class="references-section">
                    <h3>Artigos e Publicações</h3>
                    <ol class="references-list" start="6">
                        <li>Davidson, P. C., Hebblewhite, H. R., Steed, R. D., & Bode, B. W. (2008). Analysis of guidelines for basal-bolus insulin dosing: Basal insulin, correction factor, and carbohydrate-to-insulin ratio. <em>Endocrine Practice</em>, 14(9), 1095-1101.</li>
                    </ol>
        <footer class="footer">
            <button class="reference-btn" type="button" onclick="openReferencesModal()" aria-label="Abrir Referências Bibliográficas">
                </div>
            </div>
        </div>
        
        <footer class="footer">
            <button id="referencesBtn" class="reference-btn" onclick="openReferencesModal()">
                <i class="fas fa-book"></i> Referências Bibliográficas
            </button>
        </footer>
    </div>

    <script>
        // Variáveis globais
        let selectedRoute = 'sc';
        let selectedRouteGL = 'sc';
        let selectedInsulinType = 'regular';
        
        // Função para alternar entre abas
        document.querySelectorAll('.tab-link').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove a classe active de todas as abas e conteúdos
                document.querySelectorAll('.tab-link').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelectorAll('.tab-content').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Adiciona a classe active na aba clicada
                this.classList.add('active');
                
                // Mostra o conteúdo correspondente
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Função para abrir e fechar modal
        function openModal() {
            document.getElementById('aboutModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('aboutModal').style.display = 'none';
        }
        
        // Função para fechar modal clicando fora
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
        
        // Função para selecionar via de administração
        function selectRoute(route) {
            selectedRoute = route;
            
            // Remove a classe active de todas as opções
            document.querySelectorAll('#calculo-peso .route-option').forEach(option => {
                option.classList.remove('active');
            });
            
            // Adiciona a classe active na opção selecionada
            document.getElementById('route-' + route).classList.add('active');
            
            // Atualiza a descrição da via
            let description = '';
            switch(route) {
                case 'sc':
                    description = 'Via subcutânea: Administração no tecido subcutâneo, geralmente abdômen, coxas ou braços. Via padrão para insulinoterapia.';
                    break;
                case 'iv':
                    description = 'Via intravenosa: Administração direta na corrente sanguínea. Uso restrito a ambiente hospitalar e situações de emergência.';
                    break;
                case 'im':
                    description = 'Via intramuscular: Administração no tecido muscular. Absorção mais rápida que SC, utilizada em situações específicas.';
                    break;
            }
            document.getElementById('route-description').textContent = description;
        }
        
        // Função para selecionar via de administração Glargina/Lispro
        function selectRouteGL(route) {
            selectedRouteGL = route;
            
            // Remove a classe active de todas as opções
            document.querySelectorAll('#glargina-lispro .route-option').forEach(option => {
                option.classList.remove('active');
            });
            
            // Adiciona a classe active na opção selecionada
            document.getElementById('route-' + route + '-gl').classList.add('active');
            
            // Atualiza a descrição da via
            let description = 'Via subcutânea: Administração no tecido subcutâneo, geralmente abdômen, coxas ou braços. Única via para Glargina e Lispro.';
            document.getElementById('route-description-gl').textContent = description;
        }
        
        // Função para exibir/ocultar campos de fator personalizado
        document.getElementById('selectFator').addEventListener('change', function() {
            const fatorPersonalizadoGroup = document.getElementById('fatorPersonalizadoGroup');
            if (this.value === '-1') {
                fatorPersonalizadoGroup.style.display = 'block';
            } else {
                fatorPersonalizadoGroup.style.display = 'none';
            }
        });
        
        document.getElementById('selectFatorGL').addEventListener('change', function() {
            const fatorPersonalizadoGLGroup = document.getElementById('fatorPersonalizadoGLGroup');
            if (this.value === '-1') {
                fatorPersonalizadoGLGroup.style.display = 'block';
            } else {
                fatorPersonalizadoGLGroup.style.display = 'none';
            }
        });
        
        // Função para alternar entre tipos de prescrição
        document.getElementById('selectTipoPrescrição').addEventListener('change', function() {
            const esquema1 = document.getElementById('prescricao-esquema1');
            const esquema2 = document.getElementById('prescricao-esquema2');
            
            if (this.value === 'esquema1') {
                esquema1.style.display = 'block';
                esquema2.style.display = 'none';
            } else {
                esquema1.style.display = 'none';
                esquema2.style.display = 'block';
            }
        });
        
        // Função para cálculo baseado em peso
        function calcularPeso() {
            // Obter valores do formulário
            const peso = parseFloat(document.getElementById('inputPeso').value);
            let fator;
            
            if (document.getElementById('selectFator').value === '-1') {
                fator = parseFloat(document.getElementById('inputFatorPersonalizado').value);
            } else {
                fator = parseFloat(document.getElementById('selectFator').value);
            }
            
            // Validação
            if (isNaN(peso) || peso <= 0) {
                alert('Por favor, informe um peso válido.');
                return;
            }
            
            if (isNaN(fator) || fator <= 0) {
                alert('Por favor, informe um fator válido.');
                return;
            }
            
            // Aplicar ajuste baseado na via de administração
            let fatorAjustado = fator;
            if (selectedRoute === 'iv') {
                fatorAjustado = fator * 0.8; // 80% da dose SC para IV
            } else if (selectedRoute === 'im') {
                fatorAjustado = fator * 0.85; // 85% da dose SC para IM
            }
            
            // Cálculo da dose total diária
            let doseTotal = peso * fatorAjustado;
            
            // Arredondamento das doses
            doseTotal = Math.round(doseTotal);
            
            // Cálculo do esquema 70/30
            const doseManha = Math.round(doseTotal * 0.7); // 70% da dose total para manhã
            const doseNoite = Math.round(doseTotal * 0.3); // 30% da dose total para noite
            
            const intermediariaManha = Math.round(doseManha * 0.7); // 70% da dose da manhã é NPH
            const rapidaManha = Math.round(doseManha * 0.3); // 30% da dose da manhã é Regular
            
            const intermediariaNoite = Math.round(doseNoite * 0.5); // 50% da dose da noite é NPH
            const rapidaNoite = Math.round(doseNoite * 0.5); // 50% da dose da noite é Regular
            
            // Cálculo do esquema Basal-Bolus
            const doseBasal = Math.round(doseTotal * 0.5); // 50% da dose total para basal
            const bolusTotal = Math.round(doseTotal * 0.5); // 50% da dose total para bolus
            
            const bolusCafe = Math.round(bolusTotal * 0.4); // 40% do bolus total para café
            const bolusAlmoco = Math.round(bolusTotal * 0.3); // 30% do bolus total para almoço
            const bolusJantar = Math.round(bolusTotal * 0.3); // 30% do bolus total para jantar
            
            // Exibir resultados
            document.getElementById('doseTotalPeso').textContent = doseTotal;
            document.getElementById('doseManha').textContent = doseManha;
            document.getElementById('intermediariaManha').textContent = intermediariaManha;
            document.getElementById('rapidaManha').textContent = rapidaManha;
            document.getElementById('doseNoite').textContent = doseNoite;
            document.getElementById('intermediariaNoite').textContent = intermediariaNoite;
            document.getElementById('rapidaNoite').textContent = rapidaNoite;
            document.getElementById('doseBasal').textContent = doseBasal;
            document.getElementById('bolusTotal').textContent = bolusTotal;
            document.getElementById('bolusCafe').textContent = bolusCafe;
            document.getElementById('bolusAlmoco').textContent = bolusAlmoco;
            document.getElementById('bolusJantar').textContent = bolusJantar;
            
            // Mostrar resultados
            document.getElementById('resultadosPeso').classList.add('show');
        }
        
        // Função para cálculo Glargina/Lispro
        function calcularGlarginaLispro() {
            // Obter valores do formulário
            const peso = parseFloat(document.getElementById('inputPesoGL').value);
            let fator;
            
            if (document.getElementById('selectFatorGL').value === '-1') {
                fator = parseFloat(document.getElementById('inputFatorPersonalizadoGL').value);
            } else {
                fator = parseFloat(document.getElementById('selectFatorGL').value);
            }
            
            // Validação
            if (isNaN(peso) || peso <= 0) {
                alert('Por favor, informe um peso válido.');
                return;
            }
            
            if (isNaN(fator) || fator <= 0) {
                alert('Por favor, informe um fator válido.');
                return;
            }
            
            // Aplicar ajuste baseado na via de administração (apenas SC para Glargina/Lispro)
            let fatorAjustado = fator;
            
            // Cálculo da dose total diária
            let doseTotal = Math.round(peso * fatorAjustado);
            
            // Cálculo Glargina/Lispro
            const doseGlargina = Math.round(doseTotal * 0.6); // 60% da dose total para Glargina
            const doseLisproTotal = Math.round(doseTotal * 0.4); // 40% da dose total para Lispro
            
            // Distribuição da Lispro nas refeições (1/3 para cada)
            const lisproManha = Math.round(doseLisproTotal / 3);
            const lisproAlmoco = Math.round(doseLisproTotal / 3);
            const lisproJantar = doseLisproTotal - lisproManha - lisproAlmoco; // Garante que a soma seja exata
            
            // Exibir resultados
            document.getElementById('doseTotalGL').textContent = doseTotal;
            document.getElementById('doseGlargina').textContent = doseGlargina;
            document.getElementById('doseLisproTotal').textContent = doseLisproTotal;
            document.getElementById('lisproManha').textContent = lisproManha;
            document.getElementById('lisproAlmoco').textContent = lisproAlmoco;
            document.getElementById('lisproJantar').textContent = lisproJantar;
            
            // Mostrar resultados
            document.getElementById('resultadosGL').classList.add('show');
        }
        
        // Função para gerar prescrição
        function gerarPrescricao() {
            const tipoEsquema = document.getElementById('selectTipoPrescrição').value;
            let prescricaoTexto = '';
            
            if (tipoEsquema === 'esquema1') {
                // Esquema NPH/Regular
                const nphManha = document.getElementById('nphManha').value || '0';
                const regularManha = document.getElementById('regularManha').value || '0';
                const nphNoite = document.getElementById('nphNoite').value || '0';
                const regularNoite = document.getElementById('regularNoite').value || '0';
                
                prescricaoTexto = `
                <h4>RECEITUÁRIO MÉDICO</h4>
                <p style="margin-bottom: 20px;">Data: ${new Date().toLocaleDateString('pt-BR')}</p>
                
                <ol>
                    <li style="margin-bottom: 15px;">
                        <strong>Insulina NPH Humana</strong><br>
                        Apresentação: Frasco-ampola 10ml (100 UI/ml)<br>
                        Posologia: Aplicar ${nphManha} unidades pela manhã (30 minutos antes do café) e ${nphNoite} unidades à noite (30 minutos antes do jantar), por via subcutânea.
                    </li>
                    
                    <li style="margin-bottom: 15px;">
                        <strong>Insulina Regular Humana</strong><br>
                        Apresentação: Frasco-ampola 10ml (100 UI/ml)<br>
                        Posologia: Aplicar ${regularManha} unidades pela manhã (30 minutos antes do café) e ${regularNoite} unidades à noite (30 minutos antes do jantar), por via subcutânea.
                    </li>
                    
                    <li style="margin-bottom: 15px;">
                        <strong>Seringas para insulina</strong><br>
                        100 unidades com agulha 8mm<br>
                        Quantidade: 60 unidades
                    </li>
                </ol>
                
                <div style="margin-top: 30px; border-top: 1px solid #ddd; padding-top: 10px;">
                    <p><strong>Orientações:</strong></p>
                    <ul>
                        <li>Rodizie os locais de aplicação (abdômen, coxas, braços).</li>
                        <li>Aplique a insulina NPH e Regular na mesma seringa, aspirando primeiro a Regular.</li>
                        <li>Monitore a glicemia antes das principais refeições e ao deitar.</li>
                        <li>Em caso de hipoglicemia, ingerir 15g de carboidratos (3 colheres de açúcar ou 150ml de suco).</li>
                    </ul>
                </div>
                
                <p style="margin-top: 40px; text-align: center; border-top: 1px solid #ddd; padding-top: 20px;">
                    ________________________________<br>
                    Carimbo e Assinatura do Médico
                </p>`;
            } else {
                // Esquema Glargina/Lispro
                const glargina = document.getElementById('glargina').value || '0';
                const lisproManha = document.getElementById('lisproManhaPrescricao').value || '0';
                const lisproAlmoco = document.getElementById('lisproAlmocoPrescricao').value || '0';
                const lisproJantar = document.getElementById('lisproJantarPrescricao').value || '0';
                
                prescricaoTexto = `
                <h4>RECEITUÁRIO MÉDICO</h4>
                <p style="margin-bottom: 20px;">Data: ${new Date().toLocaleDateString('pt-BR')}</p>
                
                <ol>
                    <li style="margin-bottom: 15px;">
                        <strong>Insulina Glargina</strong><br>
                        Apresentação: Frasco-ampola 10ml (100 UI/ml) ou caneta 3ml (100 UI/ml)<br>
                        Posologia: Aplicar ${glargina} unidades uma vez ao dia, antes de dormir, por via subcutânea.
                    </li>
                    
                    <li style="margin-bottom: 15px;">
                        <strong>Insulina Lispro</strong><br>
                        Apresentação: Frasco-ampola 10ml (100 UI/ml) ou caneta 3ml (100 UI/ml)<br>
                        Posologia: Aplicar ${lisproManha} unidades antes do café da manhã, ${lisproAlmoco} unidades antes do almoço e ${lisproJantar} unidades antes do jantar, por via subcutânea (0-15 minutos antes das refeições).
                    </li>
                    
                    <li style="margin-bottom: 15px;">
                        <strong>Seringas para insulina</strong><br>
                        100 unidades com agulha 8mm<br>
                        Quantidade: 60 unidades
                    </li>
                </ol>
                
                <div style="margin-top: 30px; border-top: 1px solid #ddd; padding-top: 10px;">
                    <p><strong>Orientações:</strong></p>
                    <ul>
                        <li>A insulina Glargina deve ser aplicada sempre no mesmo horário, preferencialmente antes de dormir.</li>
                        <li>A insulina Lispro deve ser aplicada 0-15 minutos antes das refeições.</li>
                        <li>Rodizie os locais de aplicação (abdômen, coxas, braços).</li>
                        <li>Monitore a glicemia antes das principais refeições e ao deitar.</li>
                        <li>Em caso de hipoglicemia, ingerir 15g de carboidratos (3 colheres de açúcar ou 150ml de suco).</li>
                    </ul>
                </div>
                
                <p style="margin-top: 40px; text-align: center; border-top: 1px solid #ddd; padding-top: 20px;">
                    ________________________________<br>
                    Carimbo e Assinatura do Médico
                </p>`;
            }
            
            // Exibir a prescrição
            document.getElementById('prescricaoTexto').innerHTML = prescricaoTexto;
            document.getElementById('resultadoPrescricao').classList.add('show');
        }
        
        // Função para copiar prescrição
        function copiarPrescricao() {
            const prescricaoTexto = document.getElementById('prescricaoTexto').innerText;
            
            // Criar elemento temporário
            const tempElement = document.createElement('textarea');
            tempElement.value = prescricaoTexto;
            document.body.appendChild(tempElement);
            
            // Selecionar e copiar
            tempElement.select();
            document.execCommand('copy');
            
            // Remover elemento temporário
            document.body.removeChild(tempElement);
            
            // Feedback para o usuário
            alert('Prescrição copiada para a área de transferência!');
        }
        
        // Função para imprimir prescrição
        function imprimirPrescricao() {
            const conteudoOriginal = document.body.innerHTML;
            const conteudoImpressao = document.getElementById('prescricaoTexto').innerHTML;
            
            // Substituir conteúdo da página
            document.body.innerHTML = `
            <div style="padding: 20px; max-width: 800px; margin: 0 auto; font-family: Arial, sans-serif;">
                ${conteudoImpressao}
            </div>`;
            
            // Imprimir
            window.print();
            
            // Restaurar conteúdo original
            document.body.innerHTML = conteudoOriginal;
            
            // Recarregar eventos e funcionalidades
            carregarFuncoes();
        }
        
        // Função para alternar visualização (mobile/desktop)
        function toggleView() {
            const container = document.getElementById('appContainer');
            container.classList.toggle('mobile-view');
            
            const toggleBtn = document.querySelector('.view-toggle');
            if (container.classList.contains('mobile-view')) {
                toggleBtn.innerHTML = '<i class="fas fa-desktop"></i>';
                toggleBtn.querySelector('i').style.marginRight = '0';
            } else {
                toggleBtn.innerHTML = '<i class="fas fa-mobile-alt"></i>';
                toggleBtn.querySelector('i').style.marginRight = '0';
            }
        }
        
        // Função para abrir modal de referências
        function openReferencesModal() {
            document.getElementById('referencesModal').style.display = 'block';
        }
        
        // Função para fechar modal de referências
        function closeReferencesModal() {
            document.getElementById('referencesModal').style.display = 'none';
        }
        
        // Funcionalidade para botões collapsible
        document.addEventListener('DOMContentLoaded', function() {
            const coll = document.getElementsByClassName('collapsible');
            for (let i = 0; i < coll.length; i++) {
                coll[i].addEventListener('click', function() {
                    this.classList.toggle('active');
                    const content = this.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                });
            }
        });
        
        // Função para carregar todas as funcionalidades (após imprimir)
        function carregarFuncoes() {
            // Funcionalidade para botões collapsible
            const coll = document.getElementsByClassName('collapsible');
            for (let i = 0; i < coll.length; i++) {
                coll[i].addEventListener('click', function() {
                    this.classList.toggle('active');
                    const content = this.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                });
            }
            
            // Recarregar event listeners de navegação por abas
            document.querySelectorAll('.tab-link').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    document.querySelectorAll('.tab-link').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelectorAll('.tab-content').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    this.classList.add('active');
                    
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Recarregar event listeners dos formulários
            document.getElementById('selectFator').addEventListener('change', function() {
                const fatorPersonalizadoGroup = document.getElementById('fatorPersonalizadoGroup');
                if (this.value === '-1') {
                    fatorPersonalizadoGroup.style.display = 'block';
                } else {
                    fatorPersonalizadoGroup.style.display = 'none';
                }
            });
            
            document.getElementById('selectFatorGL').addEventListener('change', function() {
                const fatorPersonalizadoGLGroup = document.getElementById('fatorPersonalizadoGLGroup');
                if (this.value === '-1') {
                    fatorPersonalizadoGLGroup.style.display = 'block';
                } else {
                    fatorPersonalizadoGLGroup.style.display = 'none';
                }
            });
            
            document.getElementById('selectTipoPrescrição').addEventListener('change', function() {
                const esquema1 = document.getElementById('prescricao-esquema1');
                const esquema2 = document.getElementById('prescricao-esquema2');
                
                if (this.value === 'esquema1') {
                    esquema1.style.display = 'block';
                    esquema2.style.display = 'none';
                } else {
                    esquema1.style.display = 'none';
                    esquema2.style.display = 'block';
                }
            });
        }
        
        // Inicializar funcionalidades ao carregar a página
        document.addEventListener('DOMContentLoaded', carregarFuncoes);
    </script>
</body>
</html>






























.route-option {
    flex: 1;
    padding: 15px;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-speed);
}

.route-option i {
    font-size: 1.5rem;
    margin-bottom: 8px;
    color: var(--light-text);
}

.route-option span {
    font-weight: 500;
}

.route-option:hover {
    border-color: var(--primary-color);
    background-color: rgba(52, 152, 219, 0.05);
}

.route-option.active {
    border-color: var(--primary-color);
    background-color: rgba(52, 152, 219, 0.1);
}

.route-option.active i {
    color: var(--primary-color);
}

.route-description {
    margin-top: 10px;
    padding: 10px;
    background-color: var(--light-bg);
    border-radius: 5px;
    font-size: 0.9rem;
    color: var(--light-text);
}

.credits-section {
    padding: 15px 0;
    border-bottom: 1px solid var(--border-color);
}

.credits-item {
    margin-bottom: 10px;
}

.credits-item:last-child {
    margin-bottom: 0;
}

.credits-item a {
    color: var(--primary-color);
    text-decoration: none;
}

.credits-item a:hover {
    text-decoration: underline;
}

.reference-btn {
    background-color: transparent;
    color: var(--primary-color);
    border: 1px solid var(--primary-color);
    display: inline-block;
    margin: 0 auto;
}

.reference-btn:hover {
    background-color: rgba(52, 152, 219, 0.1);
    color: var(--primary-color);
}

.diagram-container {
    margin: 20px 0;
    padding: 15px;
    background-color: white;
    border-radius: 8px;
    box-shadow: var(--card-shadow);
}

.distribution-diagram {
    width: 100%;
}

.diagram-row {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.diagram-label {
    width: 180px;
    font-weight: 500;
    padding-right: 15px;
}

.diagram-bar {
    flex: 1;
    height: 40px;
    display: flex;
    border-radius: 5px;
    overflow: hidden;
}

.bar-section {
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 500;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.glargina-width {
    width: 60%;
}

.lispro-width {
    width: 40%;
}

.glargina-width {
    width: 60%;
}

.lispro-width {
    width: 40%;
}

.nph-color {
    background-color: var(--primary-color);
}

.regular-color {
    background-color: var(--secondary-color);
}

.diagram-legend {
    display: flex;
    justify-content: center;
    margin-top: 20px;
    gap: 20px;
}

.legend-item {
    display: flex;
    align-items: center;
}

.legend-color {
    width: 20px;
    height: 20px;
    border-radius: 3px;
    margin-right: 8px;
}

.card-scheme {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.scheme-card {
    background-color: white;
    border-radius: 8px;
    padding: 15px;
    box-shadow: var(--card-shadow);
    flex: 1;
    min-width: 200px;
    position: relative;
    transition: var(--transition-speed);
}

.scheme-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
}

.scheme-card h4 {
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
}

.scheme-card h4 i {
    margin-right: 8px;
    color: var(--primary-color);
}

.scheme-card ul {
    list-style-type: none;
    margin-top: 10px;
}

.scheme-card ul li {
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    font-size: 0.9rem;
}

.scheme-card ul li i {
    margin-right: 5px;
    color: var(--primary-color);
    font-size: 0.8rem;
}

.timing-info {
    background-color: #f0f7ff;
    padding: 15px;
    border-radius: 5px;
    margin-top: 20px;
    border-left: 4px solid var(--primary-color);
}

.timing-info h4 {
    display: flex;
    align-items: center;
    color: var(--primary-color);
    margin-bottom: 10px;
}

.timing-info h4 i {
    margin-right: 8px;
}

.timing-list {
    list-style-type: none;
    margin-top: 10px;
}

.timing-list li {
    margin-bottom: 8px;
    display: flex;
    align-items: flex-start;
}

.timing-list li i {
    margin-right: 8px;
    margin-top: 3px;
}

.timing-list li strong {
    margin-right: 5px;
}

.timing-info .citation {
    font-size: 0.8rem;
    color: var(--lighter-text);
    margin-top: 10px;
    text-align: right;
    font-style: italic;
}

.table-responsive {
    overflow-x: auto;
    margin-top: 15px;
    margin-bottom: 15px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    text-align: left;
}

th {
    background-color: var(--light-bg);
    font-weight: 600;
}

tr:nth-child(even) {
    background-color: #f9f9f9;
}

.collapsible {
    background-color: var(--light-bg);
    color: var(--text-color);
    cursor: pointer;
    padding: 15px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-weight: 600;
    border-radius: 5px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: var(--transition-speed);
}

.collapsible:after {
    content: '\f078';
    font-family: "Font Awesome 5 Free";
    font-weight: 900;
    color: var(--light-text);
}

.collapsible.active:after {
    content: '\f077';
}

.collapsible:hover {
    background-color: #e9ecef;
}

.collapse-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
}

.collapse-content-inner {
    padding: 15px;
    background-color: white;
    border-radius: 5px;
    box-shadow: var(--card-shadow);
    margin-bottom: 10px;
}

.citation {
    font-size: 0.8rem;
    color: var(--lighter-text);
    margin-top: 15px;
    font-style: italic;
}

.references-section {
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
}

.references-section:last-child {
    border-bottom: none;
}

.references-section h3 {
    margin-bottom: 10px;
    color: var(--primary-color);
}

.references-list {
    margin-left: 20px;
}

.references-list li {
    margin-bottom: 8px;
}

/* Tooltip */
.tooltip {
    position: relative;
    display: inline-block;
}

.tooltip .tooltiptext {
    visibility: hidden;
    width: 200px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 5px;
    padding: 8px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 0.8rem;
}

.tooltip .tooltiptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #333 transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
}

/* Custom Styles */
.no-border {
    border-bottom: none;
}

.hidden {
    display: none;
}

#fatorPersonalizadoGroup.hidden {
    display: none;
}

#fatorPersonalizadoGroup.hidden {
    display: none;
}

.hidden {
    display: none;
}

#fatorPersonalizadoGroup.hidden {
    display: none;
}

/* Mobile View Adjustments */
@media (max-width: 768px) {
    .container {
        margin: 0;
        padding: 15px;
        border-radius: 0;
        box-shadow: none;
    }

    .tabs-nav {
        flex-wrap: nowrap;
        overflow-x: scroll;
        margin-bottom: 15px;
    }

    .tabs-nav::-webkit-scrollbar {
        height: 4px;
    }

    .tabs-nav::-webkit-scrollbar-track {
        background: var(--light-bg);
        border-radius: 10px;
    }

    .tabs-nav::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 10px;
    }

    .tab-link {
        padding: 8px 12px;
        font-size: 0.9rem;
        white-space: nowrap;
    }

    .route-options {
        flex-direction: column;
    }

    .modal-content {
        margin: 20% auto;
        width: 90%;
        padding: 20px;
    }

    .diagram-row {
        flex-direction: column;
        align-items: flex-start;
    }

    .diagram-label {
        width: 100%;
        margin-bottom: 5px;
    }

    .diagram-bar {
        width: 100%;
    }

    .scheme-card {
        flex: 1 0 100%;
    }
}

/* Mode Toggle (Light/Dark) */
body.dark-mode {
    background-color: #1a1d21;
    color: #e4e6eb;
}

body.dark-mode .container {
    background-color: #282c34;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

body.dark-mode header h1 {
    color: #61dafb;
}

body.dark-mode header {
    border-bottom-color: #3e4451;
}

body.dark-mode .header-description {
    color: #abb2bf;
}

body.dark-mode .tab-link {
    color: #abb2bf;
}

body.dark-mode .tab-link:hover {
    background-color: rgba(97, 218, 251, 0.1);
    color: #61dafb;
}

body.dark-mode .tab-link.active {
    background-color: #61dafb;
    color: #282c34;
}

body.dark-mode input, 
body.dark-mode select {
    background-color: #3e4451;
    border-color: #4c5366;
    color: #e4e6eb;
}

body.dark-mode input:focus, 
body.dark-mode select:focus {
    border-color: #61dafb;
    box-shadow: 0 0 0 3px rgba(97, 218, 251, 0.2);
}

body.dark-mode label {
    color: #e4e6eb;
}

body.dark-mode button {
    background-color: #61dafb;
    color: #282c34;
}

body.dark-mode button:hover {
    background-color: #4fa8d2;
}

body.dark-mode .results {
    background-color: #3e4451;
    border-left-color: #61dafb;
}

body.dark-mode .result-item {
    border-bottom-color: #4c5366;
}

body.dark-mode .result-value {
    color: #61dafb;
}

body.dark-mode .info-box {
    background-color: #3e4451;
    border-color: #4c5366;
}

body.dark-mode .modal-content {
    background-color: #282c34;
}

body.dark-mode .close-modal {
    color: #abb2bf;
}

body.dark-mode .close-modal:hover {
    color: #e06c75;
}

body.dark-mode .modal-title {
    color: #61dafb;
    border-bottom-color: #3e4451;
}

body.dark-mode .route-option {
    border-color: #4c5366;
    background-color: #3e4451;
}

body.dark-mode .route-option:hover {
    border-color: #61dafb;
    background-color: rgba(97, 218, 251, 0.1);
}

body.dark-mode .route-option.active {
    border-color: #61dafb;
    background-color: rgba(97, 218, 251, 0.2);
}

body.dark-mode .route-description {
    background-color: #3e4451;
    color: #abb2bf;
}

body.dark-mode .credits-section {
    border-bottom-color: #3e4451;
}

body.dark-mode .credits-item a {
    color: #61dafb;
}

body.dark-mode .reference-btn {
    color: #61dafb;
    border-color: #61dafb;
}

body.dark-mode .reference-btn:hover {
    background-color: rgba(97, 218, 251, 0.1);
}

body.dark-mode .nph-color {
    background-color: #61dafb;
}

body.dark-mode .regular-color {
    background-color: #e06c75;
}

body.dark-mode .scheme-card {
    background-color: #3e4451;
}

body.dark-mode .scheme-card h4 {
    border-bottom-color: #4c5366;
}

body.dark-mode .scheme-card h4 i {
    color: #61dafb;
}

body.dark-mode .scheme-card ul li i {
    color: #61dafb;
}

body.dark-mode .timing-info {
    background-color: #2c313a;
    border-left-color: #61dafb;
}

body.dark-mode .timing-info h4 {
    color: #61dafb;
}

body.dark-mode .timing-info .citation {
    color: #abb2bf;
}

body.dark-mode th {
    background-color: #3e4451;
}

body.dark-mode tr:nth-child(even) {
    background-color: #353b45;
}

body.dark-mode td, 
body.dark-mode th {
    border-color: #4c5366;
}

body.dark-mode .collapsible {
    background-color: #3e4451;
    color: #e4e6eb;
}

body.dark-mode .collapsible:after {
    color: #abb2bf;
}

body.dark-mode .collapsible:hover {
    background-color: #4c5366;
}

body.dark-mode .collapse-content-inner {
    background-color: #3e4451;
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
